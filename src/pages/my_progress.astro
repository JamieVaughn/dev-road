---
import Home from '../layouts/Home.astro';
import { checkAuth} from '../lib/checkAuth'

const { cookies, redirect } = Astro;

const auth = await checkAuth({cookies, redirect})
  .then(data => data)
  .catch(err => console.log(err));

---

<Home>
  <main>
    <h1>My Progress</h1>
    <h2>Welcome {auth?.user?.email.split('@')[0]}</h2>
  </main>
</Home>
